[["index.html", "COMM 3710: Getting Started with R Chapter 1 Introduction 1.1 What is R? 1.2 Why R?2 1.3 R vs. RStudio", " COMM 3710: Getting Started with R Prof. Sara K. Yeo Prof. Ye Sun 2021-04-05 Chapter 1 Introduction This is a guide for getting started and using R and RStudio in COMM 3710: Introduction to Quantitative Communication Research in the Department of Communication at the University of Utah. 1.1 What is R? R is a language and environment for statistical computing and graphics.1 R is a free software environment for computing and graphics from CRAN, the Comprehensive R Archinve Network. You can always read more about R by visiting the homepage of the R Project for Statistical Computing but you are probably more interested in the answer to the following question: What is R in the context of COMM 3710? In this course, you will learn to install and use R for data analysis. In other words, R is the software that you will in the labs associated with the course. 1.2 Why R?2 Increasingly, data are important components of decision-making. Whether you are looking at industry trends, generating financial statements and reports, analyzing market data, or creating visuals to communicate your work, you will need to know how to analyze data to efficiently, accurately, and professionally to develop reports and effectively communicate your findings. R is a tool that can help you do all this and more. This course will help you become familiar with this powerful data analysis tool. Often, students ask why we use R instead of Microsoft Excel in this course. Here are some reasons for using R over Excel: 1.2.1 Ease of Use There is little doubt that Excel is much easier to use than R. Most of us already know many Excel basics and the learning curve is minimal compared to R. This is partly due to the point-and-click nature of Excel, allowing us to make simple charts and tables. R, on the other hand, is a programming language. This means that the initial learning curve is, for most, likely to be steeper than that of Excel. However, with practice and time, R becomes easier quickly and you will soon realize that R is a powerful tool for analysis and generating visuals from data. 1.2.2 Replicating Analysis Having to use the point-and-click interface, or the graphical user interface (GUI), is a distinct disadvantage of Excel. Because you cannot import or use scripts, which are a collection of commands, in Excel, you must rely on memory to replicate your analysis. R, on the other hand, is capable of reproducing analyses quickly and with different datasets. The commands for data analysis that you use in R can be saved as a script, which can then be run on multiple datasets. In other words, when we use R for data analysis, we do not have to reinvent the (data analysis) wheel as you would with Excel. 1.2.3 Visualization For simple graphics, Excel (with its minimal learning curve) can suffice. However, it is cumbersome to create attractive and professional-quality tables and figures in Excel. Visualization is where R excels (HAH, see what I did there!). When datasets begin to get complicated or large, R is better equipped to handle them without making errors and can create impressive and easily customizable visual representations. If you are still wondering why we are using R instead of Microsoft Excel for data analysis in this course, here are some examples that help illustrate the utility of R over Excel: How the BBC Visual and Data Journalism team works with graphics in R The Reinhart-Rogoff error - or How Not to Excel at Economics 1.3 R vs. RStudio Figure 1.1, from ModernDive Chapter 1 is a good illustration of the distinction between R and RStudio (Ismay and Kim 2021). Figure 1.1: Analogy of the difference between R and RStudio. Source: ModernDive Chapter 1. Throughout this course, you will be using R via RStudio. This means that you will need to have both R and RStudio installed on your computer. New users often confuse R and RStudio. The analogy makes it clear that one cannot be functional without the other. Just like the dashboard of a car would not be functional without the engine and vice versa, RStudio and R are not functional without each other. Remember that R is a programming language for statistical computing and graphics. RStudio, on the other hand, is an integrated development environment (IDE) that provides an interface and adds convenient features. Just like your dashboard has an odometer, navigation system, etc., that makes driving easier, using RStudios interface makes statistical computing using R much easier. Part of this video by Andy Field describes the difference between R and RStudio. This video will also show you how to install R and RStudio, which are covered in Chapter 2.1. https://www.r-project.org/about.html Adapted from R vs. Excel: Whats the Difference? "],["start.html", "Chapter 2 Getting Started with R 2.1 Installing R 2.2 Installing RStudio 2.3 How do I use R? 2.4 Learning by doing", " Chapter 2 Getting Started with R Remember that you need both R and RStudio. Follow the instructions below to install both programs (also known as applications). 2.1 Installing R On a web browser, navigate to https://cloud.r-project.org/. If you are a Windows user: Click on Download R for Windows, then click on base, then click on the Download link. If you are macOS user: Click on Download R for (Mac) OS X, then under Latest release: click on R-X.X.X.pkg, where R-X.X.X is the version number. For example, the latest version of R as of February 14, 2021, is R-4.0.3. If you are a Linux user: Click on Download R for Linux and choose your distribution for more information on installing R for your setup. During installation, select the default settings when prompted. 2.2 Installing RStudio On a web browser, go to https://rstudio.com/products/rstudio/download/. Scroll down to All Installers. Download and install the version of RStudio that corresponds to your operating system. Update RStudio as necessary. When you are ready to use R, you will open RStudio. In this course, you will rarely, if ever, need to use base R. Figure 2.1 shows you which icon to click on to open RStudio. Remember that you need to have both programs installed on your computerone does not work without the other. From this point on, when R is referenced in the text, you know that you are accessing and using the language through RStudio. Figure 2.1: Typically, you will only need to use RStudio for this course. Click the icon on the right to open RStudio. Source: ModernDive. 2.3 How do I use R? Unlike Excel, which has a point-and-click GUI, R is an interpreted language. This means that you, the user, must type in commands written in R code. In other words, this course will teach you to code or program using the R language.3 In COMM 3710, we will learn R by doing. You are responsible for your own learningthe best way to master R is to practice deliberately. While regular practice might include mindless repetitions, deliberate practice requires focused attention and is conducted with the specific goal of improving performance. (Clear 2017) 2.3.1 A quick tour of RStudio Watch this video by Andy Field to take a quick tour of RStudio. As you have learned from Andy Fields video, the RStudio interface consists of four panels (Figure 2.2). Wait! I only see 3 panels If you happen to see only three panels, please select File \\(\\rightarrow{}\\) New File \\(\\rightarrow{}\\) R Script. Your RStudio should like like Figure 2.2. Figure 2.2: Editor and Console windows in RStudio. 2.3.2 Some basic terminology and concepts Throughout the book, R code will be distinguished from text by using a different font. Lets start with some basic terms: Console: This is the panel in RStudio where you can view the output or results of your commands. Note that you can also enter commands in the Console panel. Pressing Enter after each command runs it, i.e., it tells R to execute the command. Editor: This is the panel in RStudio where you type commands in language that R understands. Think of this as a script containing instructions for R. You can save this script, which makes the work you have done reproducible. R script: A script is simply a text file containing a set of commands and comments. The script can be saved and used later to (re-)execute the saved commands. The script can also be edited so you can execute a modified version of the commands. Objects: Values in R are saved in objects. Dataframes: These are representations of datasets in R where the rows correspond to observations and the columns correspond to variables that describe the observations. Logical operators: These are operators in R that represent and (&amp;) and or (|). Functions: Functions are also known as commands. Functions and commands tell R what you want it to do. Functions take the form of command() with parentheses (or parents). The parentheses are for arguments, which give R specifics about the function you want it to perform. 2.3.3 Errors, warnings, and messages R shows errors, warnings, and messages in the Console window. Typically, it does so in red font, which can be intimidating for new users. DO NOT WORRYYOU ARE UNLIKELY TO BREAK R. Always read errors, warnings, or messages carefully; they often provide information that will help you troubleshoot the issue. 2.3.4 Tips for learning to code Learning to code can be frustrating at first. Frustrations are understandable and inevitable. But with deliberate practice, your coding and programming skills will improve. Keep the following tips from Ismay and Kim (2021) in mind as you learn to code in R: Computers are not that smart. You are the brains of the computerit needs to be told what to do. Instructions must be clear and without ambuguity. Copy, paste, tweak. When you begin to learn coding, it is much easier to copy, paste, and modify code than start from scratch. When you first start to program, take existing code from the resources for this course, copy, paste, and tweak them to suit your goals. Once you become more comfortable with R, you will be able to recall functions and code from memory. Learning by doing. The best way to learn coding/programming is by doing. This is why COMM 3710 includes a lab component. Individual lab assignments and group project components afford you the opportunity to learn how to code and use R by completing tasks with a goal in mind. Practice, practice, practice. As with any skill, practice is necessary for improvement. Start on assignments earlyanticipate that you will face challenges the first time you try an assignment. Use the resources provided in the course to help you troubleshoot. Most students do not start their assignments early enough to troubleshoot issues that arise. You can also use R for other coursesit is a versatile programming language that is powerful once you learn to use it. In fact, this book was made with R! R is case-sensitive. Most coding mistakes are typos. This is exacerbated when the programming language, such as R, is case-sensitive. Result, result, and RESULT are all different in R! 2.3.5 R packages There is a worldwide community of R users (e.g., search for #RCatLadies on Twitter) who write code and bundle them into packages to extend the functionality of R. Some examples that we will use in this course include ggplot2 (Wickham, Navarro, and Pederson 2020), descr, and tidyverse. Packages in R are like apps on your phonethey extend the functionality of the base technology (Figure 2.3). Figure 2.3: R packages are to R what apps are to your mobile phone. There are two steps to using apps to extend the functionality of your phone: Install app on your device from app store. This is typically done only once. An app that has been installed on your phone does not require additional installation. Open app from device. You must open the app every time you wish to use it. Similarly, R packages need to be installed on your computer and then opened and then loaded in R (Figure 2.4). Note where quotation marks are used and omitted in the commands. Figure 2.4: Watch this gif to learn how to install and load packages in R. Note that the commands are typed into the Editor, not the Consoleto run the commands written in the Editor, highlight and click Run in the top right corner. To install a package, type install.packages() in the Console window. The argument that needs to be provided is the name of the package. For example, if you are installing the descr package, you would use the command install.packages(\"descr\"). Like an app, you only need to install a package once. To use a package, you must load it. This is like opening an appit must be done everytime you open a new R session. To load a package, use the command library(). The argument within the parentheses is the name of the package you want to load. For example, to load the descr package, use library(descr). Some common errors related to installing and loading packages, which R displays in red in the Console, are shown below: Error in library(descr) : there is no package called descr If you get this error, this means that you have not installed the package. Error: could not find function This error means that you likely did not load the package for this R session. Remember, you need to load R packages each time you open R. 2.4 Learning by doing Lets try out some commands. Open RStudio and start a new R script. If you need a reminder of how to start a new R script, review section 2.3.1. To save your R script, see Section 3.6 To start, lets execute a simple command. In the Editor, type the following command. 4 + 8 To run this command, which tells R to sum 4 and 8, highlight the command and click the button in the upper right of the Editor window. You can also use the shortcut keys: Ctrl + Enter (Windows) or Cmd + Enter (Mac). You will see the result of the command you just ran in the Console window. ## [1] 12 Note that the [1] is produced by R. You can think of this as R telling you that this value, 12, is the answer to the first question you asked.4 Next, try: 3 * 3 When you run this command, R will return the product of these two numbers. ## [1] 9 Although it is good practice to write and execute commands line-by-line when you are first writing a R script, it can become tedious. To alleviate the tedium, you can run multiple commands at once by selecting all the lines that you want R to execute and using the keyboard shortcuts or the button. Type the following two lines in your Editor and try running them together: 12 + 8 16 / 4 The results in your Console panel should look like this: ## [1] 20 ## [1] 4 Table 2.1 shows some basic arithmetic operations in R. Play around with these functions in R to familiarize yourself with the R interface. Table 2.1: Operations, operators, and example inputs and outputs in R. Operation Operator Input Output addition/sum + 2 + 2 4 subtraction - 9 - 2 7 multiplication/product * 5 * 5 25 division / 12 / 3 4 power/exponent ^ 5 ^ 2 25 2.4.1 Creating objects R is an OOP or object-oriented programming language. You can think of an object as a container that holds information that you, the user, assigns to it. You will need to assign a label to the container. R stores the information within the labeled container in the Environment (Figure 2.5), which is the one of the tabs in the top right panel of RStudio. Figure 2.5: The Environment panel in RStudio. We assign information to an object by using the assignment operator, &lt;-. The generic code for creating an object looks like: label &lt;- information Lets say that we want to save the result of 2 * 10 to an object and call it kittens. In the Editor window, type and run the following R code: kittens &lt;- 2 * 10 Notice that the result in the Console when you ran this command did not give you the result of 2 * 10. This is because the result is stored as the object, kittens, and you have to ask R to display the result by calling the object. In the Editor, type kittens and run this command. You should see the result in the Console. kittens ## [1] 20 Notice that the object, kittens, appeared in the Environment when you ran the command, kittens &lt;- 2 * 10 (Figure 2.6). Figure 2.6: The Environment panel after you run the R code to create the object, kittens. 2.4.2 Data types R can store objects with different types of data. Lets create three objects containing different data types. a &lt;- 19.81 b &lt;- &quot;Hello, Salt Lake City!&quot; c &lt;- TRUE To check the type of data contained in objects a, b, and c, use the class() function. class(a) class(b) class(c) Your Console should show: ## [1] &quot;numeric&quot; ## [1] &quot;character&quot; ## [1] &quot;logical&quot; a is numeric; b is a character string; c is a so-called logical data type that is either TRUE or FALSE. These data types can be organized into various data structures. For example, a data frame, such as the data files you will use in your assignments, is one data structure. 2.4.3 R Functions As mentioned in Section 2.3.2, functions are commands that tell R what you want it to do. Functions take the (generic) form of command() with parentheses (or parents). The parentheses are for arguments, which give R specifics about the function you want it to perform. For example, the print() function will print the result of the argument or input within the parentheses. print(&quot;Hello, SLC!&quot;) ## [1] &quot;Hello, SLC!&quot; print(5 * 10) ## [1] 50 print(3 &gt; 5) ## [1] FALSE 2.4.4 Working with data frames Lets create a data frame to learn how to work with them. In the Editor panel, create a data frame by typing the following commands: id &lt;- 1:7 cats &lt;- c(1, 3, 2, 3, 5, 2, 3) gender &lt;- c(&#39;male&#39;, &#39;female&#39;, &#39;male&#39;, &#39;female&#39;, &#39;male&#39;, &#39;female&#39;, &#39;female&#39;) With the code above, you have created 3 objects, id, cats, and gender, using the concatenate() function, which can be shortened to c(). Assume these data represent 7 individuals who own a varying number of cats. And we have data on each individuals gender. Lets create a data frame from these individual objects. mydata &lt;- data.frame(id, gender, cats) View(mydata) After running the commands above, notice that your Environment panel now looks like Figure 2.7. Your data frame should look like Figure 2.8. Figure 2.7: Your Environment panel should look like this once you have run the above code. Figure 2.8: The data frame you just created. Using the mydata data frame, we will calculate the mean number of cats an individual in our data set owns. mean(mydata$cats) ## [1] 2.714286 The $ allows us to extract a column of data, or a variable, from the mydata data frame. The use of $ will be important when working with R throughout this course. To see how many females vs. males are included in the data frame, use the following command. table(mydata$gender) ## ## female male ## 4 3 Lets now look at only the number of cats owned by males in our data. This means we need to subset the data. To do so, we use square brackets, [] combined with logical operators. In this case, we will use the logical operator, ==, which means equal to. mydata$cats[mydata$gender == &quot;male&quot;] ## [1] 1 2 5 To calculate the mean number of cats owned by males, we can either create a second data frame that is the subset of mydata Monly &lt;- subset(mydata, gender == &quot;male&quot;) mean(Monly$cats) # in this case, we must use the column, cats, in the data frame that has been subsetted, Monly. ## [1] 2.666667 or we can include the last command as an argument in the mean() function. mean(mydata$cats[mydata$gender == &quot;male&quot;]) ## [1] 2.666667 2.4.5 Logical operators We used one possible logical operator, ==, in the example above. Other logical operators include: &lt;: less than &lt;=: less than or equal to &gt;: greater than &gt;=: greater than or equal to !=: not equal to ==: equal to &amp;: and (e.g., a &amp; b means a AND b) |: or (e.g., a | b means a OR b) We can also use ! to specify a condition as not something. Returning to our example of the mean number of cats males in mydata own, we could instead calculate the mean of cats owned by all individuals who are != \"female\" or not female. mean(mydata$cats[mydata$gender != &quot;female&quot;]) ## [1] 2.666667 Figure 2.9 is a visual representation of the differences between some logical operators. Figure 2.9: Differences between AND, OR, and NOT. The terms coding and programming are used interchangeably in this book. This is not exactly accurate, but it is close enough for now. "],["setup.html", "Chapter 3 Setting Up R for Assignments 3.1 Open RStudio 3.2 Create a new R script 3.3 Prepare R script 3.4 Install and load packages 3.5 Set working directory and read/load data into R 3.6 Saving your R script 3.7 Compiling your R script into a PDF 3.8 Assignment R script checklist", " Chapter 3 Setting Up R for Assignments In this course you will use R for individual lab assignments and group project components. This chapter walks you through setting up R in preparation for completing assignments. Although you may have to refer to this chapter the first few times you set up R, you will soon become accustomed to the process and it will be a natural part of your workflow. 3.1 Open RStudio Remember that R is the engine while RStudio is your dashboard. When you head out in a car, you dont start by tinkering with the engine. Instead, you use the car via its dashboard. Similarly, we will interact and use R through RStudio. 3.2 Create a new R script To start a new R script, use the File menu or the shortcut keys Ctrl + Shift + N (Windows) or Cmd + Shift + N (Mac).5 Figure 3.1: Open a new R script in RStudio. 3.3 Prepare R script To prepare your R script, use comments to type any relevant information about the script. Examples of relevant information include your name, your course, the semester during which you are enrolled in this course, the assignment name. Comments in R are denoted by the hashtag symbol, #. ## This is a comment. Once you have included information about your script as comments, you should set your working directory (Figure 3.2). You can use the command setwd() to do this or the shortcut keys: Ctrl + Shift + H (Windows/Mac). Figure 3.2: Set your working directory in RStudio using the function, setwd(). 3.4 Install and load packages Next, you need to install and load the R packages (see 2.3.5) you will be using for this R session. Refer to section 2.3.5 for more information about installing vs. loading packages. Remember that you only need to install packages once but you need to load packages each time you open R. The functions to install and load packages are install.packages() and library(), respectively. ## Install the tidyverse package install.packages(&quot;tidyverse&quot;) ## Load the tidyverse package (after installing) library(tidyverse) 3.5 Set working directory and read/load data into R Once you have installed and loaded the packages that you will need to complete your assignment, you need to set your working directory. You can use the keyboard shortcut in RStudio (Win/Mac: Ctrl + Shift + H) or use the setwd() function. ## Set the working directory to c:/Users/SaraK/COMM-3710 setwd(&quot;c:/Users/SaraK/COMM-3710&quot;) ## Read data from dataset.csv file into R (note the file name of your dataset ## might be different) dataframe_name &lt;- read.csv(&quot;dataset.csv&quot;) You can replace dataframe_name with a name of your choice. 3.6 Saving your R script Be sure to save your work often. You are likely familiar with file types like .docx (Word documents), .pdf (PDF documents), and .txt (text files). If you have not worked with R prior to enrolling in this course, you may not have encountered files with the extension .R. Files with a .R extension are known as R scripts. As noted in Section 2.3.1, a R script is simply a text file containing a set of commands and comments. To save your script, click the icon in RStudio or use the File menu (Figure 3.3). Give the file a sensible name and click Save. The file will be saved as .R in your working directory. Figure 3.3: Saving your R script in RStudio. 3.7 Compiling your R script into a PDF Most of your assignments will require you to submit a PDF document in addition to your R script. There are two main ways to create a PDF document for your assignments: Open a Microsoft Word document and copy and paste the necessary text into that document while you work. Remember to save often. Once you have completed the assignment, save the Word document as a PDF document. Have R compile your script into a PDF document. You can do this through the GUI by clicking on File \\(\\rightarrow\\) Knit Document. When the dialog box appears, select PDF as the Report output format and click Compile (Figure 3.4). Figure 3.4: Compiling a PDF from your R script in RStudio. 3.8 Assignment R script checklist Be sure you have at least the following components in your R script. This list is not comprehensive. It represents the minimal requirements for your R script. Full name and student ID # Assignment name/number (e.g., LA.1) Annotations explaining your R code R command to set working directory R command to install (if necessary) and load packages R commands necessary for completion of your assignment Keyboard shortcuts are available under Tools \\(\\rightarrow\\) Keyboard Shortcuts Help. "],["tips.html", "Chapter 4 Tips on Working with R 4.1 On labeling and naming objects 4.2 On script annotation 4.3 Be patient6", " Chapter 4 Tips on Working with R This chapter contains a collection of tips to help you progress on your R learning journey. Remember that there are many ways to achieve a goal using R code and there is a large community of R users who are often willing and able to help with troubleshooting code (e.g., Stack Overflow, RStudio Community). 4.1 On labeling and naming objects R is case-sensitive. We covered this in Section 2.3.4 but it is important enough to repeat. CATS, cats, Cats, cAts, and caTs are all different objects in R (Figure 4.1)! Figure 4.1: All the cats. This image is from Aoshima Island, Japan. Read more about Aoshima Island here. Object names cannot include spaces. Therefore, my result is not a valid name, but my.result or my_result will work. You can also use numbers in object names. Short, informative labels for objects are best. Obviously, there is some trade-off between labels that are informative (tend to be long) vs. those that are short (tend not to be specific). Use your own judgment and common sense when naming objects. Read more about R coding style in the tidyverse style guides Chapters 1 and 2. 4.2 On script annotation When writing R code, you should include explanations to your future self or to other team members (e.g., when conducting data analysis for your group project). These explanations can be included as comments and annotations to your R code in the script. Comments in R begin with #. R recognizes text that follows # as comments and ignores that text when running the code. Include annotations wherever possible; your future self and team members will thank you later. Below is an example of some code that includes annotations and comments. Note that you can use as many # as you want. ## Start by defining an object x &lt;- 3+5 y &lt;- x+6 # adding 2 to x and assigning the result to y for later use z &lt;- x*y # z is the product of x and y print(z) # this function displays the result of z in the Console ## Next, I want to determine the mean across x, y, and z xyz &lt;- c(x, y, z) # this combines x, y, and z print(xyz) mean(xyz) # this line calculates the mean of the object, xyz ############################################################################### When you run this script, R recognizes the commands and ignores the comments. However, the comments and annotations are saved in the R scriptand your future self and the rest of your team will be grateful. ## [1] 112 ## [1] 8 14 112 ## [1] 44.66667 4.3 Be patient6 Whenever youre learning a new tool, for a long time, youre going to suck But the good news is that is typical; thats something that happens to everyone, and its only temporary. -Hadley Wickham The benefits of learning by doing slowly build and compound over time. This means that one must invest time to learn R by doing. You can expect the learning curve to look something like this: Expect to ride the R rollercoaster (Figure 4.2). Figure 4.2: The R rollercoaster. Artwork by Allison Horst. The following paragraph is an excerpt from Barretts (2021) blog post. The original post is worth reading and keeping in mind as you take this learning journey of R and, more broadly, data science. This is the stubbornly quiet path of practice: our abilities lag behind our effort. At the Ugghhhh stage, our internal motivation starts to dissolve. Sure, you can make a plot or whatever, but youre still fighting errors all day. What do you have to show for it at this point? Not that much more, you might feel, than when you started. But our growth is rarely linear: often, its explosive, at least at critical moments. We suddenly begin to make connections, which help us build other relationships, and so on. Growth is never infinite, but its also rarely as linked to our immediate efforts as we expect. Source: Barrett (2021) "],["ggplot2.html", "Chapter 5 Graphing with ggplot2 5.1 ggplot2 basics 5.2 Important considerations 5.3 Learning by doing 5.4 Additional resources for graphing", " Chapter 5 Graphing with ggplot2 This chapter covers the basics of plotting with the package, ggplot2. This package is contained within a collection of R packages designed for data science known as the tidyverse. The core tidyverse includes packages that we use in everyday data analysis, including: ggplot2 dplyr tibble To learn more about the tidyverse, visit tidyverse.org. To start working with graphs, first install and load the required package. Remember that you only have to install the package once (see Section 2.3.5 to review R packages). install.packages(&quot;tidyverse&quot;) # you may not need this command library(tidyverse) 5.1 ggplot2 basics Building ggplot graphics is typically a layered process. The function that we use is ggplot(). We use the + to add layers to the function. In the function arguments (i.e., the commands within the parentheses), we define the data set that we want to use with data =, the aesthetics (x- and y-axes) with aes(), and the type of graph with geom. In the steps below, we will build the command sequentially. The ggplot() function will not run until the basic layers are in place. 5.1.1 Step 1. Specify data frame Use the data = argument to specify the data frame you are using to build the plot. Note that the word data in (data = ) is an argument and should not be replaced. For example, if your data frame is named utilities, this line will be ggplot(data = utilities). ggplot(data = dataframe_name) 5.1.2 Step 2. Specify x- and y-axes Next, use aes() to tell R which variable to place on the x- (x_var) and y-axes (y_var). Note that you are adding this argument within the parentheses of the function, ggplot(). Be sure to close all parenthesesnot doing so is a common error in R. ggplot(data = dataframe_name, aes(x = x_var, y = y_var)) If you are only working with only one variable (e.g., plotting a histogram of one variable), you need only specify the x = variable within aes(). 5.1.3 Step 3. Add geom The third step is to tell R what type of graph to createpoints, lines, bars, histograms, etc.by adding the geom layer. This function is layered on to the ggplot() function using the + sign. For example, if we would like the relationship between two variables to be represented by a scatter plot, we can simply add geom_point(). ggplot(data = dataframe_name, aes(x = x_var, y = y_var)) + # note the + sign geom_point() If we are plotting the histogram of one variable, we use geom_histogram(). ggplot(data = dataframe_name, aes(x = x_var)) + # note the + sign again geom_histogram() ## This is slightly different than the exact commands used in the video but ## more intuitive following the logic in this guide. For a bar plot, we use geom_bar(). ggplot(data = dataframe_name, aes(x = x_var)) + # note the + sign yet again geom_bar() 5.2 Important considerations The + sign used to add layers must be placed at the end of each line containing a layer. If the + sign is added in the line before the other layer, ggplot2 will return an error message. # This is the correct way of adding layers ggplot( .... ) + geom_point() # This will give you an error message ggplot( .... ) + geom_point() 5.3 Learning by doing Lets create a graph with a fake data set quiz.csv. It contains simulated data for Quiz 1 and 2 scores of 120 students. There data set contains three variables: id: Student ID quiz1: Quiz 1 scores quiz2: Quiz 2 scores First, make sure you set the working directory correctly on your computer and load the packages. Download this data set and read it into R. quiz &lt;- read.csv(&quot;quiz.csv&quot;) 5.3.1 Histograms Let us examine the distribution of grades for Quiz 1 using a histogram. To better understand what R is doing step-by-step, run these lines one at a time and see what happens in the Plots panel in RStudio. # 1: Try this command first ggplot(data = quiz) # 2: Then try this one ggplot(data = quiz, aes(x = quiz1)) # 3: And, finally, try this ggplot(data = quiz, aes(x = quiz1)) + geom_histogram() As the exercise shows, the complete command is the third one. ggplot(data = quiz, aes(x = quiz1)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. To do the same for Quiz 2 grades, simply change the x-axis specification in aes(). ggplot(data = quiz, aes(x = quiz2)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 5.3.2 Scatter plots What if we want to examine whether there is a relationship between Quiz 1 and Quiz 2 scores? You might hypothesize that the scores on Quizzes 1 and 2 should be positively correlated. To examine this graphically, we can use a scatter plot, which depicts the relationship between two quantitative variables. In this case, we use geom_point() to tell R that we want a graph with points. ggplot(data = quiz, aes(x = quiz1, y = quiz2)) + geom_point() 5.3.3 Adding axes labels and plot titles No graph is complete without axis labels and a title. We can add axis labels and a plot title with the labs() layer. Again, it is important to add this layer by using the + sign. ggplot(data = quiz, aes(x = quiz1, y = quiz2)) + geom_point() + labs(x = &#39;Quiz 1 Grades&#39;, y = &#39;Quiz 2 Grades&#39;, title = &#39;Relationship between Quiz 1 and Quiz 2 grades in COMM 3710&#39;) 5.4 Additional resources for graphing This guide includes only the basics of graphing with ggplot2. If you have questions that are not covered in this guide, the R Graphics Cookbook is a practical guide that provides recipes for quickly generating high-quality graphs. "],["missing-data.html", "Chapter 6 Missing Data 6.1 Dealing with missing data 6.2 Turning values into NA", " Chapter 6 Missing Data In R, missing data is represented by NA, which stands for Not Available. There can be many reasons for missing data. For example, a participant may have skipped a question on purpose or by accident, and therefore has no recorded value on a given variable. Missing data is a problem that we encounter frequently in data analysis. 6.1 Dealing with missing data Lets create a made-up data set (also called a toy dataset) to use as an example for this tutorial. The data frame, week, consists of three variables: day: day of the week temp: temperature reading for each day in degrees Celsius mile: miles run per day Assume the thermometer broke on Tuesday so temp data for that day is missing. On Thursday, I forgot to log the number of miles I ran so that data point is also missing. Run the following lines in R to create the data frame week: day &lt;- c(&quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thur&quot;, &quot;Fri&quot;, &quot;Sat&quot;) # creating a vector: days of the week temp &lt;- c(32.3, 38.7, NA, 40.1, 37.6, 33.5, 31.7) # creating a vector: temperature readings mile &lt;- c(3.4, 4.5, 5.5, 5.5, NA, 4.2, 4.5) # creating a vector: miles run per day week &lt;- data.frame(day, temp, mile) # creating a data frame with three variables: &quot;day&quot;, &quot;temp&quot;, &quot;mile&quot; To view the data frame in R, type week in the Console. The data frame should look like this: day temp mile Sun 32.3 3.4 Mon 38.7 4.5 Tue NA 5.5 Wed 40.1 5.5 Thur 37.6 NA Fri 33.5 4.2 Sat 31.7 4.5 You can also view the names and types of the variables in this data frame: names(week) ## [1] &quot;day&quot; &quot;temp&quot; &quot;mile&quot; str(week) ## &#39;data.frame&#39;: 7 obs. of 3 variables: ## $ day : chr &quot;Sun&quot; &quot;Mon&quot; &quot;Tue&quot; &quot;Wed&quot; ... ## $ temp: num 32.3 38.7 NA 40.1 37.6 33.5 31.7 ## $ mile: num 3.4 4.5 5.5 5.5 NA 4.2 4.5 Suppose we are interested in the average temperature for the week. To compute the mean, we use the function mean(). mean(week$temp) The ouput from the function above is: ## [1] NA That is because the variable temp contains one missing value NA, and in the command above, we did not tell R what to do with the missing value. Now, we will consider two ways of handling missing data. 6.1.1 Use the (, na.rm = TRUE) argument One way to handle missing data in a function such as mean() is to simply tell R what to do with the missing data. In the code chunk below, we are asking R to remove the NA values from the calculation. mean(week$temp, na.rm = TRUE) ## [1] 35.65 So, the average temperature for the week excluding Tuesday is 35.65. na.rm is a logical value indicating whether NA values should be stripped before the computation proceeds. By default na.rm = is set to FALSE. You will need to specify it as TRUE to let R know that you would like the NAs to be ignored by the command (i.e., NAs still exist in the data; they are just not included in the analysis). 6.1.2 Use the na.omit() function Another way of dealing with missing data is to create a new data set by excluding cases that contain NAs. The function to use is na.omit(), which tells R to remove cases that contain any NA value. week_new &lt;- na.omit(week) Now, examine this new data frame: week_new day temp mile 1 Sun 32.3 3.4 2 Mon 38.7 4.5 4 Wed 40.1 5.5 6 Fri 33.5 4.2 7 Sat 31.7 4.5 As you can see, there are only 5 rows of data in week_new. The rows for Tuesday and Thursday have been removed because Tuesday contained NA in the variable temp, and Thursday contained NA in the mile variable. Since week_new has no missing data, we can use mean() and other computation functions without the na.rm = TRUE argument. mean(week_new$temp) range(week_new$temp) sum(week_new$temp) # sum of all the temperature readings You should get: ## [1] 35.26 ## [1] 31.7 40.1 ## [1] 176.3 If you want to avoid creating new objects, you can nest the na.omit() function within the computation function (in this case, mean()). R will run the function na.omit() function first then calculate the mean of the result of the na.omit() function. mean(na.omit(week)$temp) ## [1] 35.26 6.1.3 Wait! The results of the calculation are different You may have noticed that running mean(week_new$temp) or mean(na.omit(week)$temp) returned a different result than what we did with the first approachmean(week$temp, na.rm = TRUE). 6.1.3.1 Why is this? na.omit() removes all the observations with a missing value  so observations for both Tuesdays and Thursdays are excluded. On the other hand, (, na.rm = TRUE) only ignores the NAs for the variable being analyzed. In other words, mean(week$temp, na.rm = TRUE) computes the mean based on 6 observationsafter excluding the NA for temp only. In contrast, mean(week_new$temp) or equivalently mean(na.omit(week)$temp) computes the mean temperature based on 5 observations after removing NAs for both temp and mile, even though only temp is being analyzed here. 6.2 Turning values into NA Sometimes a response is recorded by researchers in a survey, but the response category is of little meaning to the goal of your analysis. In such cases you may choose to exclude such responses from the analysis. For example, in a survey assessing the publics attitude toward COVID vaccination, where 1 = strongly oppose and 5 = strongly support, the researchers also offered these categories that participants could choose: 77 = No opinion 88 = Unsure/Undecided 99 = I dont know anything about the topic Lets quickly create another toy data set with 20 participants using the code chunk below. id &lt;- 1:20 # ID of participants att &lt;- c(1, 4, 1, 99, 2, 3, 5, 77, 2, 4, 5, 3, 88, 3, 2, 4, 1, 2, 3, 1) # attitude toward vaccination covid &lt;- data.frame(id, att) # data frame with these two variables You can see the data frame by calling the data frame, covid, in the Console (i.e., type covid in the Console). id att 1 1 2 4 3 1 4 99 5 2 6 3 7 5 8 77 9 2 10 4 11 5 12 3 13 88 14 3 15 2 16 4 17 1 18 2 19 3 20 1 Lets examine the values of the att variable. freq(covid$att) ## covid$att ## Frequency Percent ## 1 4 20 ## 2 4 20 ## 3 4 20 ## 4 3 15 ## 5 2 10 ## 77 1 5 ## 88 1 5 ## 99 1 5 ## Total 20 100 If we compute the mean without any data treatment, R would include the values 77, 88, and 99 in the computation. This, of course, incorrectly skews the distribution: mean(covid$att) # calculate mean without recoding the 77, 88, and 99 values ## [1] 15.5 An average of 15.5 on a 5-point attitude scale is not interpretablethat number is meaningless as it exceed the range of our response scale. The calculated average is much higher because of the inclusion of the three values, 77, 88, and 99, which do not represent attitude strength. You should remove these responses from your analysis by treating them as missing data. We can simply assign the value NA to replace the values 77, 88, and 99. Using the recoding methods you have learned through subsetting, you could do the following: covid$att[covid$att == 77] &lt;- NA covid$att[covid$att == 88] &lt;- NA covid$att[covid$att == 99] &lt;- NA You could also use a logical operator to recode the values into NA. covid$att[covid$att == 77 | covid$att == 88 | covid$att == 99] &lt;- NA ## That is, if the value of &quot;att&quot; is 77 OR 88 OR 99, assign `NA` to the variable of &quot;att&quot;. In other words, replace these three values with `NA`. Yet another way to accomplish this recoding is to use the following line of code: covid$att[covid$att &gt; 5] &lt;- NA Since 77, 88, 99 are the only three values outside the 1 - 5 range, you can also simply write: Examine the frequency distribution of att to determine whether you have successfully recoded 77, 88, and 99 as NA. If you are successful, you should observe three NAs in the frequency table. All other values should range from 1 - 5. freq(covid$att) ## covid$att ## Frequency Percent Valid Percent ## 1 4 20 23.53 ## 2 4 20 23.53 ## 3 4 20 23.53 ## 4 3 15 17.65 ## 5 2 10 11.76 ## NA&#39;s 3 15 ## Total 20 100 100.00 Now, you can calculate an average for the att variable using mean(). Remember that you will have to deal with the NAs. mean(covid$att, na.rm = TRUE) ## [1] 2.705882 "],["creating-a-subset-of-your-data.html", "Chapter 7 Creating a Subset of Your Data 7.1 Selecting Columns (Variables) 7.2 Selecting Rows (Observations)", " Chapter 7 Creating a Subset of Your Data From the data sets youve worked with so far, you can tell that they largely have these structural characteristics: Each variable has its own column. Each observation has its own row. Each value has its own cell. source For specific goals of analyses, We often need to create a subset of the data by selecting columns (variables), or rows (observations), or both. 7.1 Selecting Columns (Variables) For your group project, if you know your analyses will be only limited to a few variables, you can create a smaller data set that contains only these variables. It is not a requirement to do so, but it can relieve the heavy processing burden of working with a large dataset on R. You will also have a cleaner view of the variables you are working with. There are several ways to select columns: Use [ ] to index what are the columns you would like to select. Generic: newdata &lt;- fulldata[, c(\"var1\", \"var2\", \"var3\", ...)] For the week data frame we created earlier, if we only want to keep two variables, day and temp, we can use the following code. Note the , in the command. week_temp &lt;- week[, c(&quot;day&quot;, &quot;temp&quot;)] week_temp Use subset() command with select = argument that specifies the variables to be included. Generic: newdata &lt;- subset(fulldata, select = c(var1, var2, var3, ...)) week_temp &lt;- subset(week, select = c(day, temp)) week_temp Use select() command, which is part of the dplyr, which is included in the tidyverse package. Generic: newdata &lt;- select(fulldata, var1, var2, var3, ...) library(tidyverse) # install the package first if you have not already done so week_temp &lt;- select(week, day, temp) The above three methods should give you the same data frame: week_temp day temp Sun 32.3 Mon 38.7 Tue NA Wed 40.1 Thur 37.6 Fri 33.5 Sat 31.7 7.2 Selecting Rows (Observations) Using the covid data, lets say we are only interested in participants whose attitude toward the vaccine fell on the favorable side of our response scale (i.e., above the mid-point on the 1-5 point scale). We can create a subset of respondents that meet this criteria. Lets call it covid_fav. Below are three distinct ways to select these rows. Use [ ] to specify the logical conditions. Generic: newdata &lt;- fulldata[variable meeting conditions, ] Applying this to the covid data frame: covid_fav &lt;- covid[covid$att &gt; 3, ] # row selection based on logical condition, keep all columns covid_fav Use the subset() command. Generic: newdata &lt;- subset(fulldata, variable meeting certain conditions) Applied to the covid data frame: covid_fav &lt;- subset(covid, att &gt; 3) covid_fav Use the filter() command that is part of the tidyverse and dplyr packages. Generic: newdata &lt;- filter(fulldata, variables meeting certain conditions) Applied to the covid data frame: covid_fav &lt;- filter(covid, att &gt; 3) covid_fav "],["references.html", "References", " References Barrett, Malcolm. 2021. Data Science as an Atomic Habit. Malcolm Barrett. January 4, 2021. https://malco.io/2021/01/04/data-science-as-an-atomic-habit/. Clear, James. 2017. The Beginners Guide to Deliberate Practice. James Clear. January 23, 2017. https://jamesclear.com/beginners-guide-deliberate-practice. Ismay, Chester, and Albert Y. Kim. 2021. Statistical Inference via Data Science. https://moderndive.com/. Wickham, Hadley, Danielle Navarro, and Thomas Lin Pederson. 2020. Ggplot2: Elegant Graphics for Data Analysis. 3rd ed. Use R! New York, NY: Springer-Verlag. https://ggplot2-book.org/. "]]
