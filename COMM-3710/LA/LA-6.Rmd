---
title: 'LA-6: Data Management (10 points)'
pagetitle: "COMM 3710: LA-6"
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
urlcolor: blue
---

```{r setup, include=FALSE}
library(tidyverse)
library(descr)
hdata <- read.csv("HELP.csv")
knitr::opts_chunk$set(echo = FALSE)
```

In this assignment, you will put skills from LA-5 into practice.

> Remember to ...
>
> 1) Set up your R script appropriately.
> 2) Include a comment for each line of code in your R script. This can be pseudocode or other comments.

---

# Step 1 {.tabset .tabset-fade}
Load the [HELP](https://utah.instructure.com/files/117853074/download?download_frd=1) data set into R. This data set is saved as a .csv file. The codebook can be found [here](https://github.com/sarakyeo/sarakyeo.github.io/blob/master/COMM-3710/LA/README.MD#help-dataset).


# Step 2 {.tabset .tabset-fade}
## Question
Patients with a mental component score (`mcs`) less than 20 are thought to be at extreme risk of returning to the detoxification unit within the next 12 months.

Make a new variable called `ExtremeMCS` and code it as `1` if a patient is at risk based on his/her mcs score and `0` otherwise.

## Hint
Review LA-5 and how to use the `mutate()` and `case_when()` commands.


# Step 3
Make a new variable `SuicidalThought` based on the variable `g1b`. Have `1` indicate a patient has had suicidal thoughts and a `1` indicate they have not.


# Step 4 
Make a new variable `HomelessStatus` based on the variable `homeless`. Have `1` indicate that a patient is homeless and `0` indicate that they are housed.


# Step 5 {.tabset .tabset-fade}
## Question
Suppose we want to assess the overall risk a patient has to return to the detoxification unit and `ExtremeMCS`, `SuicidalThought`, and `HomelessStatus` are considered risk factors. Construct a new variable called `RiskTotal` which computes the number of risk factors a particular patient has. That is, make it a sum of these 3 variables.

## Hint
Try using `mutate()`.


# Step 6 {.tabset .tabset-fade}
## Question
Make frequency tables of `ExtremeMCS`, `SuicidalThought`, and `RiskTotal`. Answer the following questions.

a. How many patients are thought to be at risk based on their `mcs` score?
b. What percentage of patients have experienced suicidal thoughts?
c. What percentage of patients in the study have fewer than 3 risk factors? 

## Hint
We created frequency tables in LA-5.


# Submission
Submit your R script (`LA-6_FirstName-LastName.R`) to Canvas.

Your R script should:

1) Include code to install and load the packages.
2) Include code to set your working directory.
3) Contain comments and/or pseudocode for every single line of R code.
4) Run in its entirety without errors.

To ensure that your R script runs without errors, you should:

- Save your script.
- Completely shut down RStudio or restart your R session.
- Reopen RStudio, open your `LA-6_FirstName-LastName.R` script.
- Run the entire script by clicking the "Run" button in the top right of the R script.

> These standards apply to all submissions in this course that require R scripts.
